<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Inventario - Inversiones Yegni-Maik</title>

<style>
:root{
--azul:#0056a8;
--naranja:#f26c21;
--rojo:#e32026;
--gris:#f5f5f5;
}
*{box-sizing:border-box;font-family:system-ui}
body{margin:0;padding:10px;background:#fff;color:#333}
header{display:flex;gap:10px;align-items:center;margin-bottom:15px}
header img{height:60px}
.card{background:#fff;border-radius:10px;padding:15px;margin-bottom:15px;box-shadow:0 2px 6px rgba(0,0,0,.06)}
h1{font-size:18px}
h2{font-size:14px;margin-bottom:10px}
.tabs{display:flex;border:1px solid var(--azul);border-radius:8px;overflow:hidden;margin-bottom:10px}
.tab-btn{flex:1;padding:10px;border:none;background:#fff;cursor:pointer}
.tab-btn.active{background:var(--azul);color:#fff}
.tab-btn.egreso.active{background:var(--naranja)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
label{font-size:11px}
input,select{padding:8px;border-radius:6px;border:1px solid #ccc}
.btn{width:100%;padding:12px;border:none;border-radius:6px;color:#fff;font-weight:600}
.btn-ingreso{background:var(--azul)}
.btn-egreso{background:var(--naranja)}
.btn-borrar{background:var(--rojo)}
table{width:100%;border-collapse:collapse;font-size:12px}
th,td{padding:8px;border-bottom:1px solid #eee}
th{background:var(--gris)}
.table-wrapper{max-height:300px;overflow:auto;border:1px solid #eee}
.stock-critico{color:var(--rojo);font-weight:700}
.pill{font-size:10px;padding:3px 8px;border-radius:20px;border:1px solid}
.pill-ok{color:var(--azul);border-color:var(--azul)}
.pill-alta{color:var(--rojo);border-color:var(--rojo)}
</style>
</head>

<body>

<header>
<img src="logo.png">
<div>
<h1>Inversiones Yegni-Maik</h1>
<span>Sistema de Inventario</span>
</div>
</header>

<section class="card">
<h2>ðŸ“¦ Movimiento</h2>

<div class="tabs">
<button class="tab-btn active" id="tabIngreso">Ingreso</button>
<button class="tab-btn egreso" id="tabEgreso">Egreso</button>
</div>

<form id="formMovimiento">
<input type="hidden" id="tipoMovimiento" value="INGRESO">

<div class="form-grid">
<div><label>Producto</label><input id="nombreProducto" required></div>
<div>
<label>CategorÃ­a</label>
<select id="categoriaProducto" required>
<option value="">Seleccione</option>
<option value="alimentos">Alimentos</option>
<option value="bebidas">Bebidas</option>
<option value="aseo">Aseo</option>
<option value="ferreteria">FerreterÃ­a</option>
</select>
</div>
<div><label>Cantidad</label><input type="number" id="cantidadProducto" min="1" required></div>
<div><label>Precio USD</label><input type="number" id="precioUnitario" step="0.01"></div>
<div><label>Responsable</label><input id="responsableProducto" required></div>
</div>

<button class="btn btn-ingreso" id="btnGuardar">Registrar</button>
</form>
</section>

<section class="card">
<h2>ðŸ“Š Inventario</h2>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>Producto</th><th>CategorÃ­a</th><th>Stock</th><th>Estado</th>
</tr>
</thead>
<tbody id="tablaInventario">
<tr><td colspan="4" style="text-align:center">Sin registros</td></tr>
</tbody>
</table>
</div>
</section>

<script>
const STORAGE_KEY="inventario_yegni";
let movimientos=[];

function guardar(){localStorage.setItem(STORAGE_KEY,JSON.stringify(movimientos))}
function cargar(){movimientos=JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}

function calcularInventario(){
const inv={};
movimientos.forEach(m=>{
if(!inv[m.nombre]){
inv[m.nombre]={...m,stock:0}
}
m.tipo==="INGRESO"?inv[m.nombre].stock+=m.cantidad:inv[m.nombre].stock-=m.cantidad;
});
return inv;
}

function pintarInventario(){
const tbody=document.getElementById("tablaInventario");
tbody.innerHTML="";
const inv=calcularInventario();
Object.values(inv).forEach(i=>{
const crit=i.stock<10;
tbody.innerHTML+=`
<tr>
<td>${i.nombre}</td>
<td>${i.categoria}</td>
<td class="${crit?"stock-critico":""}">${i.stock}</td>
<td><span class="pill ${crit?"pill-alta":"pill-ok"}">${crit?"ALERTA":"OK"}</span></td>
</tr>`;
});
}

document.getElementById("formMovimiento").onsubmit=e=>{
e.preventDefault();

const movimiento={
tipo:document.getElementById("tipoMovimiento").value,
nombre:document.getElementById("nombreProducto").value.toUpperCase(),
categoria:document.getElementById("categoriaProducto").value,
cantidad:Number(document.getElementById("cantidadProducto").value),
precio:Number(document.getElementById("precioUnitario").value)||0,
responsable:document.getElementById("responsableProducto").value,
fecha:new Date()
};

movimientos.push(movimiento);
guardar();
pintarInventario();
e.target.reset();
};

tabIngreso.onclick=()=>{
tipoMovimiento.value="INGRESO";
btnGuardar.className="btn btn-ingreso";
tabIngreso.classList.add("active");
tabEgreso.classList.remove("active");
};

tabEgreso.onclick=()=>{
tipoMovimiento.value="EGRESO";
btnGuardar.className="btn btn-egreso";
tabEgreso.classList.add("active");
tabIngreso.classList.remove("active");
};

document.addEventListener("DOMContentLoaded",()=>{
cargar();
pintarInventario();
});
</script>

</body>
</html>
